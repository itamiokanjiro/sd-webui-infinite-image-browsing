import{d as L,a1 as O,r as z,m as te,n as E,U as b,V as S,c as a,a3 as s,a4 as e,B as d,a2 as v,$ as w,W as h,Z as $,aK as ae,aR as le,z as oe,G as U,J as ne,K as se,Y as p,aS as de,X as I,ac as x,aT as ue,ad as ie,a8 as A,a6 as re,ag as ce,a5 as N,a9 as me,aU as he,aV as pe,aW as fe,aX as ge,aO as ke,ak as B,aj as be,a0 as _e}from"./index-b50c8b7b.js";import{_ as R,a as K,F as ve}from"./numInput-9aac6802.js";import"./index-9b5e5aaf.js";/* empty css              *//* empty css              */import{_ as G}from"./index-e0c17ac7.js";import{g as we,C as Ce}from"./shortcut-026044bc.js";import"./isArrayLikeObject-5efb9182.js";import"./numInput.vue_vue_type_style_index_0_scoped_55978858_lang-b4b06c0b.js";import"./Checkbox-2256c39a.js";const F="/infinite_image_browsing/fe-static/assets/sample-55dcafc6.webp",Se=["width","height","src"],ye=L({__name:"ImageSetting",setup(D){function l(y,c){return new Promise(f=>{const g=new Image;g.onload=()=>{const i=document.createElement("canvas");i.width=g.width*c,i.height=g.height*c,i.getContext("2d").drawImage(g,0,0,i.width,i.height),f(i.toDataURL())},g.src=y})}const u=O(),C=z("");return te(()=>[u.enableThumbnail,u.gridThumbnailResolution],E(async()=>{u.enableThumbnail&&(C.value=await l(F,u.gridThumbnailResolution/1024))},300),{immediate:!0,deep:!0}),(y,c)=>{const f=K,g=G;return b(),S($,null,[a(f,{label:e(d)("defaultGridCellWidth")},{default:s(()=>[a(R,{min:64,max:1024,step:16,modelValue:e(u).defaultGridCellWidth,"onUpdate:modelValue":c[0]||(c[0]=i=>e(u).defaultGridCellWidth=i)},null,8,["modelValue"])]),_:1},8,["label"]),a(f,{label:e(d)("useThumbnailPreview")},{default:s(()=>[a(g,{checked:e(u).enableThumbnail,"onUpdate:checked":c[1]||(c[1]=i=>e(u).enableThumbnail=i)},null,8,["checked"])]),_:1},8,["label"]),e(u).enableThumbnail?(b(),v(f,{key:0,label:e(d)("thumbnailResolution")},{default:s(()=>[a(R,{modelValue:e(u).gridThumbnailResolution,"onUpdate:modelValue":c[2]||(c[2]=i=>e(u).gridThumbnailResolution=i),min:256,max:1024,step:64},null,8,["modelValue"])]),_:1},8,["label"])):w("",!0),a(f,{label:e(d)("livePreview")},{default:s(()=>[h("div",null,[h("img",{width:e(u).defaultGridCellWidth,height:e(u).defaultGridCellWidth,src:e(u).enableThumbnail?C.value:e(F)},null,8,Se)])]),_:1},8,["label"]),a(f,{label:e(d)("defaultShowChangeIndicators")},{default:s(()=>[a(g,{checked:e(u).defaultChangeIndchecked,"onUpdate:checked":c[3]||(c[3]=i=>e(u).defaultChangeIndchecked=i)},null,8,["checked"])]),_:1},8,["label"]),e(u).defaultChangeIndchecked?(b(),v(f,{key:1,label:e(d)("defaultSeedAsChange")},{default:s(()=>[a(g,{checked:e(u).defaultSeedChangeChecked,"onUpdate:checked":c[4]||(c[4]=i=>e(u).defaultSeedChangeChecked=i)},null,8,["checked"])]),_:1},8,["label"])):w("",!0),a(f,{label:e(d)("previewMaskBackgroundOpacity")},{default:s(()=>[a(R,{min:0,max:1,step:.05,modelValue:e(u).previewBgOpacity,"onUpdate:modelValue":c[5]||(c[5]=i=>e(u).previewBgOpacity=i)},null,8,["modelValue"])]),_:1},8,["label"])],64)}}}),Ie={class:"panel"},$e={style:{"margin-top":"0"}},Re={style:{"margin-left":"8px",color:"#666"}},Me={class:"lang-select-wrap"},Te={style:{"padding-left":"8px",color:"#666"}},Ue={class:"col"},xe=L({__name:"globalSetting",setup(D){const l=O(),u=ae(),C=z(!1),y=async()=>{window.location.reload()},c=[{value:"en",text:"English"},{value:"zhHans",text:"简体中文"},{value:"zhHant",text:"繁體中文"},{value:"de",text:"Deutsch"}],f=E(o=>{const t=l.shortcut[o];["ctrl","shift"].includes(t.toLowerCase())&&(l.shortcut[o]="")},700),g=le(()=>{oe.warn(d("notAllowSingleCtrlOrShiftAsShortcut"))},3e3),i=(o,t)=>{const m=we(o);["ctrl","shift"].includes(m.toLowerCase())&&(g(),f(t)),m&&(l.shortcut[t]=m)},P=async()=>{await he("shutdown_api_server_command"),await pe.removeFile(fe),await ge()},j=U(()=>[{value:"empty",text:d("emptyStartPage")},{value:"last-workspace-state",text:d("restoreLastWorkspaceState")},...u.snapshots.map(t=>({value:`workspace_snapshot_${t.id}`,text:d("restoreWorkspaceSnapshot",[t.name])}))]),V=U(()=>{const o=l.shortcut,t={};return Object.entries(o).forEach(([m,k])=>{var r;t[r=k+""]??(t[r]=0),t[k+""]++}),t}),q=U(()=>{var t;const o=[{key:"download",label:d("download")},{key:"delete",label:d("deleteSelected")}];return(t=l.conf)==null||t.all_custom_tags.forEach(m=>{o.push({key:`toggle_tag_${m.name}`,label:d("toggleTagSelection",{tag:m.name})})}),l.quickMovePaths.forEach(m=>{o.push({key:`copy_to_${m.dir}`,label:d("copyTo")+" "+m.zh})}),l.quickMovePaths.forEach(m=>{o.push({key:`move_to_${m.dir}`,label:d("moveTo")+" "+m.zh})}),o}),H=o=>o&&o in V.value&&V.value[o]>1,M=ne(se+"disable_maximize",!1);return(o,t)=>{var W;const m=ke,k=G,r=K,X=B,J=R,T=B,Y=Ce,Z=be,Q=ve;return b(),S("div",Ie,[(W=e(l).conf)!=null&&W.is_readonly?(b(),v(m,{key:0,message:o.$t("readonlyModeSettingPageDesc"),type:"warning"},null,8,["message"])):w("",!0),w("",!0),a(Q,null,{default:s(()=>[h("h2",$e,p(e(d)("ImageBrowsingSettings")),1),a(ye),h("h2",null,"TikTok "+p(e(d)("view")),1),a(r,{label:o.$t("showTiktokNavigator")},{default:s(()=>[a(k,{checked:e(l).showTiktokNavigator,"onUpdate:checked":t[0]||(t[0]=n=>e(l).showTiktokNavigator=n)},null,8,["checked"]),h("span",Re,p(e(d)("showTiktokNavigatorDesc")),1)]),_:1},8,["label"]),h("h2",null,p(e(d)("imgSearch")),1),a(r,{label:o.$t("rebuildImageIndex")},{default:s(()=>[a(X,{onClick:e(de)},{default:s(()=>[I(p(o.$t("start")),1)]),_:1},8,["onClick"])]),_:1},8,["label"]),h("h2",null,p(e(d)("autoRefresh")),1),a(r,{label:o.$t("autoRefreshWalkMode")},{default:s(()=>[a(k,{checked:e(l).autoRefreshWalkMode,"onUpdate:checked":t[1]||(t[1]=n=>e(l).autoRefreshWalkMode=n)},null,8,["checked"])]),_:1},8,["label"]),a(r,{label:o.$t("autoRefreshNormalFixedMode")},{default:s(()=>[a(k,{checked:e(l).autoRefreshNormalFixedMode,"onUpdate:checked":t[2]||(t[2]=n=>e(l).autoRefreshNormalFixedMode=n)},null,8,["checked"])]),_:1},8,["label"]),a(r,{label:e(d)("autoRefreshWalkModePosLimit")},{default:s(()=>[a(J,{min:0,max:1024,step:16,modelValue:e(l).autoRefreshWalkModePosLimit,"onUpdate:modelValue":t[3]||(t[3]=n=>e(l).autoRefreshWalkModePosLimit=n)},null,8,["modelValue"])]),_:1},8,["label"]),h("h2",null,p(e(d)("other")),1),a(r,{label:o.$t("lang")},{default:s(()=>[h("div",Me,[a(e(x),{options:c,value:e(l).lang,"onUpdate:value":t[4]||(t[4]=n=>e(l).lang=n),onChange:t[5]||(t[5]=n=>C.value=!0)},null,8,["value"])]),C.value?(b(),v(T,{key:0,type:"primary",onClick:y,ghost:""},{default:s(()=>[I(p(e(d)("langChangeReload")),1)]),_:1})):w("",!0)]),_:1},8,["label"]),a(r,{label:o.$t("onlyFoldersAndImages")},{default:s(()=>[a(k,{checked:e(l).onlyFoldersAndImages,"onUpdate:checked":t[6]||(t[6]=n=>e(l).onlyFoldersAndImages=n)},null,8,["checked"])]),_:1},8,["label"]),a(r,{label:o.$t("showCommaInGenInfoPanel")},{default:s(()=>[a(k,{checked:e(l).showCommaInInfoPanel,"onUpdate:checked":t[7]||(t[7]=n=>e(l).showCommaInInfoPanel=n)},null,8,["checked"])]),_:1},8,["label"]),a(r,{label:o.$t("showRandomImageInStartup")},{default:s(()=>[a(k,{checked:e(l).showRandomImageInStartup,"onUpdate:checked":t[8]||(t[8]=n=>e(l).showRandomImageInStartup=n)},null,8,["checked"])]),_:1},8,["label"]),a(r,{label:o.$t("defaultSortingMethod")},{default:s(()=>[a(e(x),{value:e(l).defaultSortingMethod,"onUpdate:value":t[9]||(t[9]=n=>e(l).defaultSortingMethod=n),conv:e(ue),options:e(ie)},null,8,["value","conv","options"])]),_:1},8,["label"]),a(r,{label:o.$t("longPressOpenContextMenu")},{default:s(()=>[a(k,{checked:e(l).longPressOpenContextMenu,"onUpdate:checked":t[10]||(t[10]=n=>e(l).longPressOpenContextMenu=n)},null,8,["checked"])]),_:1},8,["label"]),a(r,{label:o.$t("openOnAppStart")},{default:s(()=>[a(e(x),{value:e(l).defaultInitinalPage,"onUpdate:value":t[11]||(t[11]=n=>e(l).defaultInitinalPage=n),options:j.value},null,8,["value","options"])]),_:1},8,["label"]),(b(!0),S($,null,A(e(l).ignoredConfirmActions,(n,_)=>(b(),v(r,{label:o.$t(_+"SkipConfirm"),key:_},{default:s(()=>[a(Y,{checked:e(l).ignoredConfirmActions[_],"onUpdate:checked":ee=>e(l).ignoredConfirmActions[_]=ee},null,8,["checked","onUpdate:checked"])]),_:2},1032,["label"]))),128)),a(r,{label:o.$t("disableMaximize")},{default:s(()=>[a(k,{checked:e(M),"onUpdate:checked":t[12]||(t[12]=n=>re(M)?M.value=n:null)},null,8,["checked"]),h("sub",Te,p(o.$t("takeEffectAfterReloadPage")),1)]),_:1},8,["label"]),h("h2",null,p(e(d)("shortcutKey")),1),(b(!0),S($,null,A(q.value,n=>(b(),v(r,{label:n.label,key:n.key},{default:s(()=>[h("div",{class:ce(["col",{conflict:H(e(l).shortcut[n.key]+"")}]),onKeydown:t[13]||(t[13]=N(()=>{},["stop","prevent"]))},[a(Z,{value:e(l).shortcut[n.key],onKeydown:N(_=>i(_,n.key),["stop","prevent"]),placeholder:o.$t("shortcutKeyDescription")},null,8,["value","onKeydown","placeholder"]),a(T,{onClick:_=>e(l).shortcut[n.key]="",class:"clear-btn"},{default:s(()=>[I(p(o.$t("clear")),1)]),_:2},1032,["onClick"])],34)]),_:2},1032,["label"]))),128)),e(me)?(b(),S($,{key:0},[h("h2",null,p(e(d)("clientSpecificSettings")),1),a(r,null,{default:s(()=>[h("div",Ue,[a(T,{onClick:P,class:"clear-btn"},{default:s(()=>[I(p(o.$t("initiateSoftwareStartupConfig")),1)]),_:1})])]),_:1})],64)):w("",!0)]),_:1})])}}});const Ee=_e(xe,[["__scopeId","data-v-7cfe1ab7"]]);export{Ee as default};
